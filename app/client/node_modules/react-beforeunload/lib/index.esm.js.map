{"version":3,"file":"index.esm.js","sources":["../src/useBeforeunload.js","../src/Beforeunload.js"],"sourcesContent":["import { useEffect } from 'react';\nimport useLatest from 'use-latest';\n\nconst useBeforeunload = (handler) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof handler !== 'function' && handler != null) {\n      throw new TypeError(\n        `Expected \\`handler\\` to be of type \\`function\\`, but received type \\`${typeof handler}\\``\n      );\n    }\n  }\n\n  const handlerRef = useLatest(handler);\n\n  useEffect(() => {\n    const handleBeforeunload = (event) => {\n      let returnValue;\n      if (handlerRef.current != null) {\n        returnValue = handlerRef.current(event);\n      }\n\n      // Chrome requires `returnValue` to be set.\n      if (event.defaultPrevented) {\n        event.returnValue = '';\n      }\n\n      if (typeof returnValue === 'string') {\n        event.returnValue = returnValue;\n        return returnValue;\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeunload);\n\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeunload);\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n};\n\nexport default useBeforeunload;\n","import PropTypes from 'prop-types';\nimport useBeforeunload from './useBeforeunload';\n\nconst Beforeunload = ({ children = null, onBeforeunload }) => {\n  useBeforeunload(onBeforeunload);\n  return children;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  Beforeunload.propTypes = {\n    children: PropTypes.any,\n    onBeforeunload: PropTypes.func.isRequired,\n  };\n}\n\nexport default Beforeunload;\n"],"names":["useBeforeunload","handler","process","env","NODE_ENV","TypeError","handlerRef","useLatest","useEffect","handleBeforeunload","event","returnValue","current","defaultPrevented","window","addEventListener","removeEventListener","Beforeunload","children","onBeforeunload","propTypes","PropTypes","any","func","isRequired"],"mappings":";;;;IAGMA,eAAe,GAAG,SAAlBA,eAAkB,CAACC,OAAD,EAAa;AACnC,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,QAAI,OAAOH,OAAP,KAAmB,UAAnB,IAAiCA,OAAO,IAAI,IAAhD,EAAsD;AACpD,YAAM,IAAII,SAAJ,sEACoE,OAAOJ,OAD3E,OAAN;AAGD;AACF;;AAED,MAAMK,UAAU,GAAGC,SAAS,CAACN,OAAD,CAA5B;AAEAO,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;AACpC,UAAIC,WAAJ;;AACA,UAAIL,UAAU,CAACM,OAAX,IAAsB,IAA1B,EAAgC;AAC9BD,QAAAA,WAAW,GAAGL,UAAU,CAACM,OAAX,CAAmBF,KAAnB,CAAd;AACD,OAJmC;;;AAOpC,UAAIA,KAAK,CAACG,gBAAV,EAA4B;AAC1BH,QAAAA,KAAK,CAACC,WAAN,GAAoB,EAApB;AACD;;AAED,UAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACnCD,QAAAA,KAAK,CAACC,WAAN,GAAoBA,WAApB;AACA,eAAOA,WAAP;AACD;AACF,KAfD;;AAiBAG,IAAAA,MAAM,CAACC,gBAAP,CAAwB,cAAxB,EAAwCN,kBAAxC;AAEA,WAAO,YAAM;AACXK,MAAAA,MAAM,CAACE,mBAAP,CAA2B,cAA3B,EAA2CP,kBAA3C;AACD,KAFD;AAGD,GAvBQ,EAuBN,EAvBM,CAAT,CAXmC;AAmCpC;;ICnCKQ,YAAY,GAAG,SAAfA,YAAe,OAAyC;AAAA,2BAAtCC,QAAsC;AAAA,MAAtCA,QAAsC,8BAA3B,IAA2B;AAAA,MAArBC,cAAqB,QAArBA,cAAqB;AAC5DnB,EAAAA,eAAe,CAACmB,cAAD,CAAf;AACA,SAAOD,QAAP;AACD;;AAED,IAAIhB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCa,EAAAA,YAAY,CAACG,SAAb,GAAyB;AACvBF,IAAAA,QAAQ,EAAEG,SAAS,CAACC,GADG;AAEvBH,IAAAA,cAAc,EAAEE,SAAS,CAACE,IAAV,CAAeC;AAFR,GAAzB;AAID;;;;"}